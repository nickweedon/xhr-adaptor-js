/*! xhr-adaptor-js 2016-05-02 */
define("xhr-adaptor-js",[],function(){function EventDelegate(a,b){this._xhr=a,this.realHandler=b}function PropMethodFactoryBase(){}function NativePropMethodFactory(){}function ActiveXAwarePropMethodFactory(){}function deriveDebugFactoryFrom(a){function b(){}return b.prototype=Object.create(a.prototype),b.constructor=b,b.prototype.getProperty=function(a,b){return console.debug("Retrieving value for property '"+b+"'"),this._parent().getProperty.apply(this,arguments)},b.prototype.setProperty=function(a,b,c){"_skipPropLog"in a||console.debug("Setting value of property '"+b+"' to: "+c),this._parent().setProperty.apply(this,arguments)},b.prototype.invokeMethod=function(a,b,c){for(var d=[],e=0;e<c.length;e++)d[e]=c[e];return console.debug("Invoking "+b+"("+JSON.stringify(d)+")"),this._parent().invokeMethod.apply(this,arguments)},b.prototype.setEventProperty=function(a,b,c,d,e){console.debug("Setting value of property '"+b+"' to: "+e),a._skipPropLog=!0;try{this._parent().setEventProperty.apply(this,arguments)}finally{delete a._skipPropLog}},b}function XHRWrapperProtoBuilder(a,b,c){this.factory=a,this.proto=b,this.nativeXhrInstance=c}function isActiveXObjectSupported(){try{{({})instanceof ActiveXObject}}catch(a){return!1}return!0}function getTypeString(a){var b=/function (.{1,})\(/,c=b.exec(a.constructor.toString());return c&&c.length>1?c[1]:""}var xhrAdaptorJs=xhrAdaptorJs||{};EventDelegate.prototype.callRealHandler=function(){this.realHandler.apply(this._xhr,arguments)},EventDelegate.prototype.applyRealHandler=function(a){this.realHandler.apply(this._xhr,a)},Object.defineProperty(EventDelegate.prototype,"xhr",{get:function(){return this._xhr}}),PropMethodFactoryBase.prototype._parent=function(){return Object.getPrototypeOf(Object.getPrototypeOf(this))},PropMethodFactoryBase.prototype.createMethod=function(a){var b=this;return function(){return b.invokeMethod(this.impl,a,arguments)}},PropMethodFactoryBase.prototype.createPropGetter=function(a){var b=this;return function(){return b.getProperty(this.impl,a)}},PropMethodFactoryBase.prototype.createPropSetter=function(a){var b=this;return function(c){b.setProperty(this.impl,a,c)}},PropMethodFactoryBase.prototype.createEvtPropSetter=function(a){var b=this;return function(c){var d=this,e=null;e=a in this.eventDelegate?this.eventDelegate[a]:function(){this.applyRealHandler(arguments)};var f=new EventDelegate(d,c);b.setEventProperty(this.impl,a,f,e,c)}},PropMethodFactoryBase.prototype.getProperty=function(){throw new Error("Must be implemented in subclass!")},PropMethodFactoryBase.prototype.setProperty=function(){throw new Error("Must be implemented in subclass!")},PropMethodFactoryBase.prototype.invokeMethod=function(){throw new Error("Must be implemented in subclass!")},PropMethodFactoryBase.prototype.setEventProperty=function(){throw new Error("Must be implemented in subclass!")},NativePropMethodFactory.prototype=Object.create(PropMethodFactoryBase.prototype),NativePropMethodFactory.constructor=NativePropMethodFactory,NativePropMethodFactory.prototype.getProperty=function(a,b){return a[b]},NativePropMethodFactory.prototype.setProperty=function(a,b,c){a[b]=c},NativePropMethodFactory.prototype.invokeMethod=function(a,b,c){return a[b].apply(a,c)},NativePropMethodFactory.prototype.setEventProperty=function(a,b,c,d){var e=function(){d.apply(c,arguments)};this.setProperty(a,b,e)},ActiveXAwarePropMethodFactory.prototype=Object.create(NativePropMethodFactory.prototype),ActiveXAwarePropMethodFactory.constructor=ActiveXAwarePropMethodFactory,ActiveXAwarePropMethodFactory.prototype.getProperty=function(obj,propertyName){return obj instanceof ActiveXObject?eval("obj."+propertyName+";"):this._parent().getProperty.apply(this,arguments)},ActiveXAwarePropMethodFactory.prototype.setProperty=function(obj,propertyName,value){return obj instanceof ActiveXObject?void eval("obj."+propertyName+" = value;"):this._parent().setProperty.apply(this,arguments)},ActiveXAwarePropMethodFactory.prototype.invokeMethod=function(obj,methodName,args){if(obj instanceof ActiveXObject){var evalStr="obj."+methodName+"(";args.length>0&&(evalStr+="args[0]");for(var i=1;i<args.length;i++)evalStr+=", args["+i+"]";return evalStr+=");",eval(evalStr)}return this._parent().invokeMethod.apply(this,arguments)},XHRWrapperProtoBuilder.prototype.buildMethods=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];(null===this.nativeXhrInstance||b in this.nativeXhrInstance)&&(this.proto[b]=this.factory.createMethod(b))}return this},XHRWrapperProtoBuilder.prototype.buildEventProperties=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];(null===this.nativeXhrInstance||b in this.nativeXhrInstance)&&Object.defineProperty(this.proto,b,{get:this.factory.createPropGetter(b),set:this.factory.createEvtPropSetter(b)})}return this},XHRWrapperProtoBuilder.prototype.buildReadWriteProperties=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];(null===this.nativeXhrInstance||b in this.nativeXhrInstance)&&Object.defineProperty(this.proto,b,{get:this.factory.createPropGetter(b),set:this.factory.createPropSetter(b)})}return this},XHRWrapperProtoBuilder.prototype.buildReadOnlyProperties=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];(null===this.nativeXhrInstance||b in this.nativeXhrInstance)&&Object.defineProperty(this.proto,b,{get:this.factory.createPropGetter(b)})}return this};var xhrAdaptorJs=xhrAdaptorJs||{};xhrAdaptorJs.XHRWrapper=function(a){console.assert(void 0!==a,"Wrapped implementation must be passed as the first argument to the XHRWrapper constructor."),this.impl=a;for(var b in this.eventDelegate)this[b]=function(){}},xhrAdaptorJs.XHRWrapper.prototype.eventDelegate={};var debugXHR=!1;!function(){var a=isActiveXObjectSupported(),b=a?ActiveXAwarePropMethodFactory:NativePropMethodFactory,c=debugXHR?deriveDebugFactoryFrom(b):b,d=new c,e=a?null:new window.XMLHttpRequest,f=new XHRWrapperProtoBuilder(d,xhrAdaptorJs.XHRWrapper.prototype,e);f.buildMethods("abort","getAllResponseHeaders","getResponseHeader","open","overrideMimeType","send","setRequestHeader","init","openRequest","sendAsBinary").buildEventProperties("onreadystatechange","ontimeout","onloadstart","onprogress","onabort","onerror","onload","onloadend").buildReadWriteProperties("responseType","timeout","withCredentials","mozBackgroundRequest","multipart").buildReadOnlyProperties("readyState","response","responseText","responseXML","status","statusText","upload","channel","mozAnon","mozSystem","mozResponseArrayBuffer")}();var xhrAdaptorJs=xhrAdaptorJs||{};return xhrAdaptorJs.XHRManager=function(){},xhrAdaptorJs.XHRManager.prototype.getXhrClass=function(){return void 0!==window.XMLHttpRequest?window.XMLHttpRequest:function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}throw new Error("This browser does not support XMLHttpRequest or ActiveX XMLHTTP.")}},xhrAdaptorJs.XHRManager.prototype.injectWrapper=function(a){var b=this.getXhrClass(),c=getTypeString(window.XMLHttpRequest.prototype);"xhrWrapperClosure"!=c&&(window.origXMLHttpRequest=b),XMLHttpRequest=function(){return new a(new b)}},xhrAdaptorJs.XHRManager.prototype.resetXHR=function(){void 0!==window.origXMLHttpRequest&&(window.XMLHttpRequest=window.origXMLHttpRequest)},xhrAdaptorJs.manager=new xhrAdaptorJs.XHRManager,xhrAdaptorJs});